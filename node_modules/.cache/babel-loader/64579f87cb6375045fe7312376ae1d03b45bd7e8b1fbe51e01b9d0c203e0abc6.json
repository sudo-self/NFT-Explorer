{"ast":null,"code":"import { V, c as computeRubberband } from './maths-0ab39ae9.esm.js';\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\nfunction hasCapture() {\n  let capture = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n  let actionKey = arguments.length > 1 ? arguments[1] : undefined;\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\nfunction toHandlerProp(device) {\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  let capture = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device) {\n  let action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 || (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\nfunction distanceAngle(P1, P2) {\n  try {\n    const dx = P2.clientX - P1.clientX;\n    const dy = P2.clientY - P1.clientY;\n    const cx = (P2.clientX + P1.clientX) / 2;\n    const cy = (P2.clientY + P1.clientY) / 2;\n    const distance = Math.hypot(dx, dy);\n    const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n    const origin = [cx, cy];\n    return {\n      angle,\n      distance,\n      origin\n    };\n  } catch (_unused) {}\n  return null;\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n  return payload;\n}\nfunction call(v) {\n  if (typeof v === 'function') {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = state.timeDelta = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n      V.addTo(state._distance, _absoluteDelta);\n    }\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n        state.timeDelta = dt;\n      }\n    }\n  }\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n}\nfunction selectAxis(_ref3, threshold) {\n  let [dx, dy] = _ref3;\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n  return undefined;\n}\nclass CoordinatesEngine extends Engine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n}\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  },\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n  preventDefault() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n  triggerAllEvents() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    return value;\n  },\n  rubberband() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n      case false:\n        return [0, 0];\n      default:\n        return V.toVector(value);\n    }\n  },\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n        return r;\n      };\n    }\n    return transform || identity;\n  },\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n      return NaN;\n    },\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n      return NaN;\n    },\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\nconst DEFAULT_AXIS_THRESHOLD = 0;\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, _ref4) {\n    let {\n      axis\n    } = _ref4;\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  axisThreshold() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_AXIS_THRESHOLD;\n    return value;\n  },\n  bounds() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n    if ('current' in value) {\n      return () => value.current;\n    }\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n});\nconst KEYS_DELTA_MAP = {\n  ArrowRight: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [displacement * factor, 0];\n  },\n  ArrowLeft: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [-1 * displacement * factor, 0];\n  },\n  ArrowUp: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [0, -1 * displacement * factor];\n  },\n  ArrowDown: function (displacement) {\n    let factor = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n    return [0, displacement * factor];\n  }\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n  setup() {\n    const state = this.state;\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    const _values = pointerValues(event);\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n    this.emit();\n  }\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [_dx, _dy] = state._delta;\n      const [_mx, _my] = state._movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n      if (state.elapsedTime < sdt) {\n        const _vx = Math.abs(_dx / state.timeDelta);\n        const _vy = Math.abs(_dy / state.timeDelta);\n        if (_vx > svx && Math.abs(_mx) > sx) state.swipe[0] = Math.sign(_dx);\n        if (_vy > svy && Math.abs(_my) > sy) state.swipe[1] = Math.sign(_dy);\n      }\n    }\n    this.emit();\n  }\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(this.config.keyboardDisplacement, factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n}\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_KEYBOARD_DISPLACEMENT = 10;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, _ref5) {\n    let {\n      pointer: {\n        touch = false,\n        lock = false,\n        mouse = false\n      } = {}\n    } = _ref5;\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScrollAxis(value, _k, _ref6) {\n    let {\n      preventScroll\n    } = _ref6;\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n  pointerCapture(_v, _k, _ref7) {\n    let {\n      pointer: {\n        capture = true,\n        buttons = 1,\n        keys = true\n      } = {}\n    } = _ref7;\n    this.pointerButtons = buttons;\n    this.keys = keys;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold(value, _k, _ref8) {\n    let {\n      filterTaps = false,\n      tapsThreshold = 3,\n      axis = undefined\n    } = _ref8;\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n  swipe() {\n    let {\n      velocity = DEFAULT_SWIPE_VELOCITY,\n      distance = DEFAULT_SWIPE_DISTANCE,\n      duration = DEFAULT_SWIPE_DURATION\n    } = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n  delay() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n      case false:\n        return 0;\n      default:\n        return value;\n    }\n  },\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  },\n  keyboardDisplacement() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : DEFAULT_KEYBOARD_DISPLACEMENT;\n    return value;\n  }\n});\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n      return NaN;\n    },\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n      return NaN;\n    },\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\nfunction clampStateInternalMovementToBounds(state) {\n  const [ox, oy] = state.overflow;\n  const [dx, dy] = state._delta;\n  const [dirx, diry] = state._direction;\n  if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n    state._movement[0] = state._movementBound[0];\n  }\n  if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n    state._movement[1] = state._movementBound[1];\n  }\n}\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ingKey\", 'pinching');\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n    if (!state._active) return;\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && (Array.isArray(modifierKey) ? !modifierKey.find(k => event[k]) : !event[modifierKey])) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n  wheelChange(event) {\n    const isR3f = 'uv' in event;\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      bindFunction('lostPointerCapture', '', this[device + 'End'].bind(this));\n    }\n    if (this.config.pinchOnWheel) {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n}\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, _ref9) {\n    let {\n      shared,\n      pointer: {\n        touch = false\n      } = {}\n    } = _ref9;\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds(_v, _k, _ref0) {\n    let {\n      scaleBounds = {},\n      angleBounds = {}\n    } = _ref0;\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  },\n  pinchOnWheel() {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\nclass MoveEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n}\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function () {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\nclass ScrollEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n}\nconst scrollConfigResolver = coordinatesConfigResolver;\nclass WheelEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n}\nconst wheelConfigResolver = coordinatesConfigResolver;\nclass HoverEngine extends CoordinatesEngine {\n  constructor() {\n    super(...arguments);\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n}\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: function () {\n    let value = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    return value;\n  }\n});\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };","map":{"version":3,"names":["V","c","computeRubberband","_toPrimitive","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","String","Number","_toPropertyKey","arg","key","_defineProperty","obj","value","Object","defineProperty","enumerable","configurable","writable","ownKeys","e","r","t","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","push","apply","_objectSpread2","arguments","length","forEach","getOwnPropertyDescriptors","defineProperties","EVENT_TYPE_MAP","pointer","start","change","end","mouse","touch","gesture","capitalize","string","toUpperCase","slice","actionsWithoutCaptureSupported","hasCapture","capture","actionKey","includes","toHandlerProp","device","action","deviceProps","pointerCaptureEvents","parseProp","prop","eventKey","substring","toLowerCase","passive","indexOf","replace","captureKey","toDomEventType","isTouch","event","getPointerType","pointerType","getCurrentTargetTouchList","Array","from","touches","_event$currentTarget","_event$currentTarget$","target","currentTarget","contains","getTouchList","type","changedTouches","targetTouches","getValueEvent","distanceAngle","P1","P2","dx","clientX","dy","clientY","cx","cy","distance","Math","hypot","angle","atan2","PI","origin","_unused","touchIds","map","identifier","touchDistanceAngle","ids","pointerId","valueEvent","pointerValues","LINE_HEIGHT","PAGE_HEIGHT","wheelValues","deltaX","deltaY","deltaMode","scrollValues","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","getEventDetails","payload","buttons","shiftKey","altKey","metaKey","ctrlKey","assign","v","_len","args","_key","noop","chain","_len2","fns","_key2","result","fn","assignDefault","fallback","BEFORE_LAST_KINEMATICS_DELAY","Engine","constructor","ctrl","state","computeValues","computeInitial","init","reset","shared","eventStore","gestureEventStores","timeoutStore","gestureTimeoutStores","config","sharedConfig","handler","handlers","ingKey","_active","active","_blocked","_force","_step","intentional","_movement","_distance","_direction","_delta","_bounds","Infinity","axis","memo","elapsedTime","timeDelta","direction","overflow","_movementBound","velocity","movement","delta","timeStamp","lastOffset","offset","startTime","values","_values","transform","_initial","initial","compute","dt","preventDefault","cancelable","pointerIds","size","locked","document","pointerLockElement","down","pressed","_absoluteDelta","abs","addTo","axisIntent","_m0","_m1","t0","t1","threshold","hasCustomTransform","sign","v0","v1","restrictToAxis","previousOffset","gestureIsActive","first","last","bounds","setup","computeOffset","ox","oy","x0","x1","y0","y1","rubberband","sub","computeMovement","absoluteDelta","emit","clean","triggerAllEvents","aliasKey","selectAxis","_ref3","absDx","absDy","CoordinatesEngine","add","axisThreshold","lockDirection","identity","DEFAULT_RUBBERBAND","commonConfigResolver","enabled","eventOptions","_k","toVector","process","env","NODE_ENV","originalTransform","isFinite","console","warn","domTarget","Error","NaN","DEFAULT_AXIS_THRESHOLD","coordinatesConfigResolver","_v","_ref4","current","HTMLElement","left","right","top","bottom","KEYS_DELTA_MAP","ArrowRight","displacement","factor","ArrowLeft","ArrowUp","ArrowDown","DragEngine","_pointerId","_pointerActive","_keyboardActive","_preventScroll","_delayed","swipe","tap","canceled","cancel","bind","boundRect","getBoundingClientRect","targetRect","setTimeout","setActive","pointerClean","pointerDown","isArray","pointerButtons","ctrlIds","setEventIds","pointerCapture","setPointerCapture","setupPointer","preventScrollAxis","setupScrollPrevention","delay","setupDelayTrigger","startPointerDrag","pointerMove","id","movementX","movementY","remove","pointerUp","hasPointerCapture","releasePointerCapture","tapsThreshold","filterTaps","_dx","_dy","_mx","_my","svx","svy","sx","sy","sdt","duration","_vx","_vy","pointerClick","detail","stopPropagation","preventScrollDelay","sourceEvent","style","window","getComputedStyle","touchAction","_unused2","pointerLock","requestPointerLock","exitPointerLock","preventScroll","persistEvent","keyDown","deltaFn","keyboardDisplacement","keyUp","bindFunction","persist","isBrowser","createElement","supportsTouchEvents","isTouchScreen","navigator","maxTouchPoints","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","GestureEvent","SUPPORT","touchscreen","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","DEFAULT_KEYBOARD_DISPLACEMENT","DEFAULT_DRAG_AXIS_THRESHOLD","pen","dragConfigResolver","_ref5","lock","_ref6","_ref7","_ref8","useTouch","experimental_preventWindowScrollY","swipeVelocity","swipeDistance","swipeDuration","clampStateInternalMovementToBounds","dirx","diry","SCALE_ANGLE_RATIO_INTENT_DEG","PINCH_WHEEL_RATIO","PinchEngine","_pointerEvents","Map","_touchIds","turns","axisMovementDifference","touchStart","ctrlTouchIds","every","has","pinchStart","pointerStart","ctrlPointerIds","set","touchMove","pinchMove","prev_a","delta_a","delta_turns","touchEnd","some","pointerEnd","delete","gestureStart","scale","rotation","gestureMove","_previousMovement","gestureEnd","wheel","modifierKey","find","k","wheelStart","wheelChange","wheelEnd","isR3f","defaultPrevented","pinchOnWheel","pinchConfigResolver","_ref9","_ref0","scaleBounds","angleBounds","_scaleBounds","D","min","max","_angleBounds","A","MoveEngine","move","mouseOnly","moveStart","moveChange","moveEnd","moveConfigResolver","ScrollEngine","scroll","scrollChange","scrollEnd","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","enter","leave","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","engine","resolver","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","C","E","S","_","a","b","d","f","h","i","m","p","s","w"],"sources":["/opt/homebrew/var/www/wolf/untitled folder 2/Build-Your-NFT-Explorer/untitled folder/NFT-Explorer/node_modules/.pnpm/@use-gesture+core@10.3.1/node_modules/@use-gesture/core/dist/actions-fe213e88.esm.js"],"sourcesContent":["import { V, c as computeRubberband } from './maths-0ab39ae9.esm.js';\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function (r) {\n      return Object.getOwnPropertyDescriptor(e, r).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n      _defineProperty(e, r, t[r]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n    });\n  }\n  return e;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\nfunction hasCapture(capture = false, actionKey) {\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 || (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\nfunction distanceAngle(P1, P2) {\n  try {\n    const dx = P2.clientX - P1.clientX;\n    const dy = P2.clientY - P1.clientY;\n    const cx = (P2.clientX + P1.clientX) / 2;\n    const cy = (P2.clientY + P1.clientY) / 2;\n    const distance = Math.hypot(dx, dy);\n    const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n    const origin = [cx, cy];\n    return {\n      angle,\n      distance,\n      origin\n    };\n  } catch (_unused) {}\n  return null;\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = state.timeDelta = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n      state.startTime = state.timeStamp = event.timeStamp;\n    }\n  }\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n      V.addTo(state._distance, _absoluteDelta);\n    }\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n        state.timeDelta = dt;\n      }\n    }\n  }\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n}\n\nfunction selectAxis([dx, dy], threshold) {\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n  return undefined;\n}\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n  preventDefault(value = false) {\n    return value;\n  },\n  triggerAllEvents(value = false) {\n    return value;\n  },\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n      case false:\n        return [0, 0];\n      default:\n        return V.toVector(value);\n    }\n  },\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n        return r;\n      };\n    }\n    return transform || identity;\n  },\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n      return NaN;\n    },\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n      return NaN;\n    },\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nconst DEFAULT_AXIS_THRESHOLD = 0;\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  axisThreshold(value = DEFAULT_AXIS_THRESHOLD) {\n    return value;\n  },\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n    if ('current' in value) {\n      return () => value.current;\n    }\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (displacement, factor = 1) => [displacement * factor, 0],\n  ArrowLeft: (displacement, factor = 1) => [-1 * displacement * factor, 0],\n  ArrowUp: (displacement, factor = 1) => [0, -1 * displacement * factor],\n  ArrowDown: (displacement, factor = 1) => [0, displacement * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n  setup() {\n    const state = this.state;\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    const _values = pointerValues(event);\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n    this.emit();\n  }\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [_dx, _dy] = state._delta;\n      const [_mx, _my] = state._movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n      if (state.elapsedTime < sdt) {\n        const _vx = Math.abs(_dx / state.timeDelta);\n        const _vy = Math.abs(_dy / state.timeDelta);\n        if (_vx > svx && Math.abs(_mx) > sx) state.swipe[0] = Math.sign(_dx);\n        if (_vy > svy && Math.abs(_my) > sy) state.swipe[1] = Math.sign(_dy);\n      }\n    }\n    this.emit();\n  }\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(this.config.keyboardDisplacement, factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n}\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: supportsTouchEvents(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_KEYBOARD_DISPLACEMENT = 10;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, {\n    pointer: {\n      touch = false,\n      lock = false,\n      mouse = false\n    } = {}\n  }) {\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScrollAxis(value, _k, {\n    preventScroll\n  }) {\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1,\n      keys = true\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    this.keys = keys;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold(value, _k, {\n    filterTaps = false,\n    tapsThreshold = 3,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n      case false:\n        return 0;\n      default:\n        return value;\n    }\n  },\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  },\n  keyboardDisplacement(value = DEFAULT_KEYBOARD_DISPLACEMENT) {\n    return value;\n  }\n});\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n      return NaN;\n    },\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n      return NaN;\n    },\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nfunction clampStateInternalMovementToBounds(state) {\n  const [ox, oy] = state.overflow;\n  const [dx, dy] = state._delta;\n  const [dirx, diry] = state._direction;\n  if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n    state._movement[0] = state._movementBound[0];\n  }\n  if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n    state._movement[1] = state._movementBound[1];\n  }\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'pinching');\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchStart(event, payload);\n  }\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    if (!payload) return;\n    this.pinchMove(event, payload);\n  }\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n    if (!state._active) return;\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && (Array.isArray(modifierKey) ? !modifierKey.find(k => event[k]) : !event[modifierKey])) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n      bindFunction('lostPointerCapture', '', this[device + 'End'].bind(this));\n    }\n    if (this.config.pinchOnWheel) {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, {\n    shared,\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  },\n  pinchOnWheel(value = true) {\n    return value;\n  }\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}